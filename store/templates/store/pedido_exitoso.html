{% extends 'store/base.html' %}

{% block title %}¡Pedido Realizado! - 10tendencias{% endblock %}

{% block content %}
{# ======= Sección Hero (mensaje de éxito) ======= #}
<section class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">¡Pedido Exitoso!</h1>
        <p class="hero-subtitle">Tu compra ha sido procesada correctamente</p>
    </div>
</section>

{# ======= Sección de confirmación y resumen del pedido ======= #}
<section class="success-section">
    <div class="container">
        <div class="success-card">
            <div class="success-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="#10B981" stroke-width="2" fill="none"/>
                    <path d="M9 12l2 2 4-4" stroke="#10B981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            
            {# Mensaje personalizado de agradecimiento #}
            <div class="success-message">
                <h2>¡Gracias por tu compra, {{ pedido.datosfacturacion.nombre }}!</h2>
                <p>Tu pedido ha sido procesado exitosamente y pronto recibirás tus productos personalizados.</p>
            </div>

            {# Resumen del pedido con detalles y descuentos #}
            <div class="order-summary">
                <h3>Resumen del Pedido</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="summary-label">Número de Pedido:</span>
                        <span class="summary-value">#{{ pedido.id }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Fecha:</span>
                        <span class="summary-value">{{ pedido.fecha_pedido|date:"d M Y" }}</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Subtotal:</span>
                        <span class="summary-value">${{ pedido.total|floatformat:2 }}</span>
                    </div>
                    {% if tiene_cupon %}
                    <div class="summary-item">
                        <span class="summary-label">Cupón aplicado:</span>
                        <span class="summary-value">{{ cupon.codigo }} ({{ cupon.descuento_porcentaje }}%)</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Descuento:</span>
                        <span class="summary-value discount">-${{ descuento|floatformat:2 }}</span>
                    </div>
                    {% endif %}
                    <div class="summary-item">
                        <span class="summary-label">Total:</span>
                        <span class="summary-value total">${{ total_con_descuento|floatformat:2 }}</span>
                    </div>
                </div>
            </div>

            {# Botón para volver al catálogo #}
            <div class="success-actions">
                <a href="{% url 'catalogo' %}" class="btn btn-primary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Seguir Comprando
                </a>
            </div>
        </div>
    </div>
</section>

{# ======= Footer ======= #}
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-brand">
                <h3>10tendencias</h3>
                <p>Inspirando tu día con productos personalizados</p>
            </div>
            <div class="footer-links">
                <a href="{% url 'catalogo' %}">Catálogo</a>
                <a href="{% url 'catalogo' %}">Productos</a>
                <a href="{% url 'catalogo' %}">Contacto</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 10tendencias. Todos los derechos reservados.</p>
        </div>
    </div>
</footer>
{% endblock %}